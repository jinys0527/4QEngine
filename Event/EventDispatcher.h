#pragma once
#include "IEventListener.h"
#include "Event.h"
#include <unordered_map>
#include <vector>

class EventDispatcher
{
public:
	void AddListener(EventType type, IEventListener* listener);
	void RemoveListener(EventType type, IEventListener* listener);
	void Dispatch(EventType type, const void* data, int eventPriority = 0);
	std::vector<IEventListener*>* FindListeners(EventType type)
	{
		if (m_Listeners.empty())
			return nullptr;

		auto it = m_Listeners.find(type);
		if (it == m_Listeners.end())
			return nullptr;
		return &it->second;
	}

	const std::vector<IEventListener*>* FindListeners(EventType type) const
	{
		auto it = m_Listeners.find(type);
		if (it == m_Listeners.end())
			return nullptr;
		return &it->second;
	}

private :
	std::unordered_map<EventType, std::vector<IEventListener*>> m_Listeners;
};

